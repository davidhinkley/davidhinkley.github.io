{"version":3,"file":"static/js/122.792a622b.chunk.js","mappings":"iNAMA,MAgLA,EAhLgBA,KACd,MAAM,YAAEC,EAAW,gBAAEC,IAAoBC,EAAAA,EAAAA,MAClCC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAS,KACtCC,EAASC,IAAcF,EAAAA,EAAAA,WAAS,IAEvCG,EAAAA,EAAAA,YAAU,KACgBC,WACtB,IACE,MAEMC,SAFYC,EAAAA,EAAMC,IAAI,gBAETC,KAAKC,QAAOC,GAASA,EAAMC,SAAWhB,EAAYiB,KACrEb,EAAcM,GACdH,GAAW,EACb,CAAE,MAAOW,GACPC,QAAQD,MAAM,8BAA+BA,GAC7CX,GAAW,EACb,GAGFa,EAAiB,GAChB,CAACpB,EAAYiB,KA4DhB,OACEI,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACED,EAAAA,EAAAA,MAAA,OAAKE,UAAU,0DAAyDD,SAAA,EACtEE,EAAAA,EAAAA,KAAA,MAAID,UAAU,wDAAuDD,SAAC,kBACtED,EAAAA,EAAAA,MAAA,OAAKE,UAAU,4CAA2CD,SAAA,EACxDE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,kIAAiID,SAC7ItB,EAAYyB,SAASC,OAAO,GAAGC,iBAElCN,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACEE,EAAAA,EAAAA,KAAA,MAAID,UAAU,wBAAuBD,SAAEtB,EAAYyB,YACnDD,EAAAA,EAAAA,KAAA,KAAGD,UAAU,mCAAkCD,SAAEtB,EAAY4B,kBAKnEP,EAAAA,EAAAA,MAAA,OAAKE,UAAU,OAAMD,SAAA,EACnBE,EAAAA,EAAAA,KAAA,MAAID,UAAU,wDAAuDD,SAAC,gBAErEhB,GACCkB,EAAAA,EAAAA,KAAA,OAAKD,UAAU,4BAA2BD,UACxCE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,qFAEfpB,EAAW0B,OAAS,GACtBR,EAAAA,EAAAA,MAAA,OAAKE,UAAU,iEAAgED,SAAA,EAC7ED,EAAAA,EAAAA,MAAA,OAAKE,UAAU,sFAAqFD,SAAA,EAClGD,EAAAA,EAAAA,MAAA,MAAIE,UAAU,sBAAqBD,SAAA,CAAC,gBAAcnB,EAAW0B,OAAO,QACpER,EAAAA,EAAAA,MAAA,OAAKE,UAAU,iBAAgBD,SAAA,EAC7BD,EAAAA,EAAAA,MAAA,UACES,QA5CQrB,UACtB,GAAIsB,OAAOC,QAAQ,kFACjB,IAEE,MAAMC,EAAiB9B,EAAW+B,KAAInB,GACpCJ,EAAAA,EAAMwB,OAAO,eAAepB,EAAME,cAG9BmB,QAAQC,IAAIJ,GAClB7B,EAAc,GAChB,CAAE,MAAOc,GACPC,QAAQD,MAAM,6BAA8BA,EAC9C,CACF,EAgCcK,UAAU,0CAAyCD,SAAA,EAEnDE,EAAAA,EAAAA,KAACc,EAAAA,EAAS,CAACf,UAAU,iBAAiB,iBAGxCC,EAAAA,EAAAA,KAACe,EAAAA,GAAI,CAACC,GAAG,UAAUjB,UAAU,yBAAwBD,SAAC,sBAK1DE,EAAAA,EAAAA,KAAA,MAAID,UAAU,gDAA+CD,SAC1DnB,EAAW+B,KAAInB,IACdM,EAAAA,EAAAA,MAAA,MAAmBE,UAAU,wCAAuCD,SAAA,EAClED,EAAAA,EAAAA,MAAA,OAAKE,UAAU,oBAAmBD,SAAA,EAChCE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,kDAAiDD,UAC9DE,EAAAA,EAAAA,KAAA,OACEiB,IAAK1B,EAAM2B,KACXC,IAAK5B,EAAM6B,MACXrB,UAAU,6BACVsB,QAAUC,IACRA,EAAEC,OAAOC,QAAU,KACnBF,EAAEC,OAAON,IAAM,+CAA+C,OAIpEpB,EAAAA,EAAAA,MAAA,OAAAC,SAAA,EACEE,EAAAA,EAAAA,KAACe,EAAAA,GAAI,CAACC,GAAI,WAAWzB,EAAME,KAAMM,UAAU,yEAAwED,SAChHP,EAAM6B,SAETvB,EAAAA,EAAAA,MAAA,KAAGE,UAAU,2CAA0CD,SAAA,CAAC,aAC3CP,EAAMkC,SAAS,WAAIlC,EAAMmC,MAAM,mBAIhD7B,EAAAA,EAAAA,MAAA,OAAKE,UAAU,iBAAgBD,SAAA,EAC7BE,EAAAA,EAAAA,KAACe,EAAAA,GAAI,CACHC,GAAI,WAAWzB,EAAME,KACrBM,UAAU,2BAA0BD,SACrC,UAGDD,EAAAA,EAAAA,MAAA,UACES,QAASA,IAnGRrB,WACnB,GAAIsB,OAAOC,QAAQ,6EACjB,UACQrB,EAAAA,EAAMwB,OAAO,eAAelB,KAElCb,EAAcD,EAAWW,QAAOC,GAASA,EAAME,KAAOA,IACxD,CAAE,MAAOC,GACPC,QAAQD,MAAM,wBAAyBA,EACzC,CACF,EA0FiCiC,CAAapC,EAAME,IAClCM,UAAU,0CAAyCD,SAAA,EAEnDE,EAAAA,EAAAA,KAACc,EAAAA,EAAS,CAACf,UAAU,iBAAiB,iBAjCnCR,EAAME,YA0CrBI,EAAAA,EAAAA,MAAA,OAAKE,UAAU,iEAAgED,SAAA,EAC7EE,EAAAA,EAAAA,KAAA,MAAID,UAAU,yDAAwDD,SAAC,yCACvEE,EAAAA,EAAAA,KAAA,KAAGD,UAAU,wCAAuCD,SAAC,+CACrDE,EAAAA,EAAAA,KAACe,EAAAA,GAAI,CAACC,GAAG,UAAUjB,UAAU,kBAAiBD,SAAC,oCAMjD,C,6CCjLV,SAASgB,EAASc,EAIfC,GAAQ,IAJQ,MACjBT,EAAK,QACLU,KACGC,GACJH,EACC,OAAoBI,EAAAA,cAAoB,MAAOC,OAAOC,OAAO,CAC3DC,MAAO,6BACPC,KAAM,OACNC,QAAS,YACTC,YAAa,IACbC,OAAQ,eACR,cAAe,OACf,YAAa,OACbC,IAAKX,EACL,kBAAmBC,GAClBC,GAAQX,EAAqBY,EAAAA,cAAoB,QAAS,CAC3DvC,GAAIqC,GACHV,GAAS,KAAmBY,EAAAA,cAAoB,OAAQ,CACzDS,cAAe,QACfC,eAAgB,QAChBC,EAAG,kaAEP,CACA,MACA,EADiCX,EAAAA,WAAiBlB,E","sources":["pages/Profile.js","../node_modules/@heroicons/react/24/outline/esm/TrashIcon.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useAuth } from '../context/AuthContext';\nimport { Link } from 'react-router-dom';\nimport { TrashIcon } from '@heroicons/react/24/outline';\n\nconst Profile = () => {\n  const { currentUser, isAuthenticated } = useAuth();\n  const [userPhotos, setUserPhotos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  \n  useEffect(() => {\n    const fetchUserPhotos = async () => {\n      try {\n        const res = await axios.get('/api/photos');\n        // Filter photos by current user\n        const photos = res.data.filter(photo => photo.userId === currentUser.id);\n        setUserPhotos(photos);\n        setLoading(false);\n      } catch (error) {\n        console.error('Error fetching user photos:', error);\n        setLoading(false);\n      }\n    };\n    \n    fetchUserPhotos();\n  }, [currentUser.id]);\n  \n  const handleLike = async (id) => {\n    if (!isAuthenticated) {\n      alert('Please log in to like photos');\n      return;\n    }\n    \n    // Find the photo in our state\n    const photo = userPhotos.find(p => p.id === id);\n    \n    // If already liked, don't do anything\n    if (photo && photo.liked) {\n      return;\n    }\n    \n    try {\n      const res = await axios.post(`/api/photos/${id}/like`);\n      setUserPhotos(\n        userPhotos.map((photo) =>\n          photo.id === id ? { \n            ...photo, \n            likes: res.data.likes,\n            liked: true\n          } : photo\n        )\n      );\n    } catch (error) {\n      console.error('Error liking photo:', error);\n    }\n  };\n  \n  const handleDelete = async (id) => {\n    if (window.confirm('Are you sure you want to delete this photo? This action cannot be undone.')) {\n      try {\n        await axios.delete(`/api/photos/${id}`);\n        // Remove the deleted photo from the state\n        setUserPhotos(userPhotos.filter(photo => photo.id !== id));\n      } catch (error) {\n        console.error('Error deleting photo:', error);\n      }\n    }\n  };\n  \n  const handleDeleteAll = async () => {\n    if (window.confirm('Are you sure you want to delete ALL your photos? This action cannot be undone.')) {\n      try {\n        // Delete each photo one by one\n        const deletePromises = userPhotos.map(photo => \n          axios.delete(`/api/photos/${photo.id}`)\n        );\n        \n        await Promise.all(deletePromises);\n        setUserPhotos([]);\n      } catch (error) {\n        console.error('Error deleting all photos:', error);\n      }\n    }\n  };\n  \n  return (\n    <div>\n      <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-8\">\n        <h1 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-4\">Your Profile</h1>\n        <div className=\"flex flex-col md:flex-row md:items-center\">\n          <div className=\"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 text-2xl font-bold mb-4 md:mb-0 md:mr-6\">\n            {currentUser.username.charAt(0).toUpperCase()}\n          </div>\n          <div>\n            <h2 className=\"text-xl font-semibold\">{currentUser.username}</h2>\n            <p className=\"text-gray-600 dark:text-gray-400\">{currentUser.email}</p>\n          </div>\n        </div>\n      </div>\n      \n      <div className=\"mb-8\">\n        <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-6\">Your Photos</h2>\n        \n        {loading ? (\n          <div className=\"flex justify-center py-12\">\n            <div className=\"w-12 h-12 border-t-4 border-primary-600 border-solid rounded-full animate-spin\"></div>\n          </div>\n        ) : userPhotos.length > 0 ? (\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden\">\n            <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center\">\n              <h3 className=\"text-lg font-medium\">Your Photos ({userPhotos.length})</h3>\n              <div className=\"flex space-x-2\">\n                <button\n                  onClick={handleDeleteAll}\n                  className=\"btn btn-danger btn-sm flex items-center\"\n                >\n                  <TrashIcon className=\"h-4 w-4 mr-1\" />\n                  Delete All\n                </button>\n                <Link to=\"/upload\" className=\"btn btn-primary btn-sm\">\n                  Upload New\n                </Link>\n              </div>\n            </div>\n            <ul className=\"divide-y divide-gray-200 dark:divide-gray-700\">\n              {userPhotos.map(photo => (\n                <li key={photo.id} className=\"p-4 flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    <div className=\"w-16 h-16 mr-4 relative overflow-hidden rounded\">\n                      <img \n                        src={photo.path} \n                        alt={photo.title} \n                        className=\"object-cover w-full h-full\"\n                        onError={(e) => {\n                          e.target.onerror = null;\n                          e.target.src = 'https://via.placeholder.com/150?text=No+Image';\n                        }}\n                      />\n                    </div>\n                    <div>\n                      <Link to={`/photos/${photo.id}`} className=\"text-lg font-medium hover:text-primary-600 dark:hover:text-primary-400\">\n                        {photo.title}\n                      </Link>\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                        Category: {photo.category} â€¢ {photo.likes} likes\n                      </p>\n                    </div>\n                  </div>\n                  <div className=\"flex space-x-2\">\n                    <Link \n                      to={`/photos/${photo.id}`} \n                      className=\"btn btn-secondary btn-sm\"\n                    >\n                      View\n                    </Link>\n                    <button\n                      onClick={() => handleDelete(photo.id)}\n                      className=\"btn btn-danger btn-sm flex items-center\"\n                    >\n                      <TrashIcon className=\"h-4 w-4 mr-1\" />\n                      Delete\n                    </button>\n                  </div>\n                </li>\n              ))}\n            </ul>\n          </div>\n        ) : (\n          <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-md p-8 text-center\">\n            <h3 className=\"text-lg font-medium text-gray-800 dark:text-white mb-4\">You haven't uploaded any photos yet</h3>\n            <p className=\"text-gray-600 dark:text-gray-400 mb-6\">Start sharing your photos with the world!</p>\n            <Link to=\"/upload\" className=\"btn btn-primary\">\n              Upload Your First Photo\n            </Link>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Profile;","import * as React from \"react\";\nfunction TrashIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(TrashIcon);\nexport default ForwardRef;"],"names":["Profile","currentUser","isAuthenticated","useAuth","userPhotos","setUserPhotos","useState","loading","setLoading","useEffect","async","photos","axios","get","data","filter","photo","userId","id","error","console","fetchUserPhotos","_jsxs","children","className","_jsx","username","charAt","toUpperCase","email","length","onClick","window","confirm","deletePromises","map","delete","Promise","all","TrashIcon","Link","to","src","path","alt","title","onError","e","target","onerror","category","likes","handleDelete","_ref","svgRef","titleId","props","React","Object","assign","xmlns","fill","viewBox","strokeWidth","stroke","ref","strokeLinecap","strokeLinejoin","d"],"sourceRoot":""}