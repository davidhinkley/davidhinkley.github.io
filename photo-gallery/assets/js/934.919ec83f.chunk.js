"use strict";(self.webpackChunkphoto_gallery_client=self.webpackChunkphoto_gallery_client||[]).push([[934],{934:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var r=t(43),s=t(902),d=t(862),l=t(579);const c=()=>{const[e,a]=(0,r.useState)(""),[t,c]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[n,x]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),{darkMode:h}=(0,s.D)();(0,r.useEffect)((()=>{y()}),[]);const y=async()=>{try{o(!0);const e=await d.A.get("/api/backups");c(e.data),x(null)}catch(e){console.error("Error fetching backups:",e),x("Failed to load backups. Please try again later.")}finally{o(!1)}};return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8 bg-white dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Backup Manager"}),(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6 border border-gray-200 dark:border-gray-700",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Create New Backup"}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-700 dark:text-gray-300",children:"Backup name (optional)"}),(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>{a(e.target.value)},placeholder:"Enter a name for this backup",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-l-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white",disabled:u}),(0,l.jsx)("button",{onClick:async()=>{try{p(!0),await d.A.post("/api/backups",{name:e||"manual"}),a(""),await y(),alert("Backup created successfully!")}catch(t){console.error("Error creating backup:",t),alert("Failed to create backup. Please try again.")}finally{p(!1)}},className:"px-4 py-2 bg-blue-600 text-white rounded-r-md "+(u?"opacity-70 cursor-not-allowed":"hover:bg-blue-700"),disabled:u,children:u?"Creating...":"Create Backup"})]})]})})]}),(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border border-gray-200 dark:border-gray-700",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Available Backups"}),i?(0,l.jsx)("p",{className:"text-center py-4 text-gray-700 dark:text-gray-300",children:"Loading backups..."}):n?(0,l.jsx)("p",{className:"text-red-600 dark:text-red-400",children:n}):0===t.length?(0,l.jsx)("p",{className:"italic text-gray-700 dark:text-gray-300",children:"No backups found. Create your first backup above."}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full border-collapse table-fixed",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[40%]",children:"Name"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[25%]",children:"Created"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[15%]",children:"Size"}),(0,l.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[20%]",children:"Actions"})]})}),(0,l.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:t.map((e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900 dark:text-white max-w-[250px] overflow-hidden",children:(0,l.jsx)("div",{className:"truncate",title:e.id,children:e.id.length>30?`${e.id.substring(0,30)}...`:e.id})}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900 dark:text-white",children:e.createdFormatted}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900 dark:text-white",children:e.sizeFormatted}),(0,l.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-gray-900 dark:text-white min-w-[150px]",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to restore this backup? This will replace your current data."))try{await d.A.post(`/api/backups/restore/${e}`),alert("Backup restored successfully!")}catch(a){console.error("Error restoring backup:",a),alert("Failed to restore backup. Please try again.")}})(e.id),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium",children:"Restore"}),(0,l.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this backup? This action cannot be undone."))try{await d.A.delete(`/api/backups/${e}`),await y(),alert("Backup deleted successfully!")}catch(a){console.error("Error deleting backup:",a),alert("Failed to delete backup. Please try again.")}})(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300 font-medium",children:"Delete"})]})})]},e.id)))})]})})]})]})}}}]);
//# sourceMappingURL=934.919ec83f.chunk.js.map