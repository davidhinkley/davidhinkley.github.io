"use strict";(self.webpackChunkphoto_gallery_client=self.webpackChunkphoto_gallery_client||[]).push([[6],{6:(e,t,r)=>{r.r(t),r.d(t,{default:()=>h});var a=r(43),s=r(213),l=r(134),o=r(579);const i=e=>{let{categories:t,selectedCategory:r,onCategoryChange:a,onSearch:s}=e;return(0,o.jsx)("div",{className:"mb-8 bg-white dark:bg-[#051E36] p-4 rounded-lg shadow-md",children:(0,o.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,o.jsxs)("div",{className:"flex flex-wrap items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-gray-700 dark:text-white font-medium",children:"Filter by:"}),(0,o.jsx)("button",{onClick:()=>a(null),className:"px-3 py-1 rounded-full text-sm font-medium "+(r?"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600":"bg-primary-600 text-white"),children:"All"}),t.map((e=>(0,o.jsx)("button",{onClick:()=>a(e),className:"px-3 py-1 rounded-full text-sm font-medium "+(r===e?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-700 dark:text-white dark:hover:bg-gray-600"),children:e},e)))]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search photos...",className:"input pr-10 dark:bg-gray-800 dark:text-white dark:border-gray-700",onChange:e=>s(e.target.value)}),(0,o.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:(0,o.jsx)("svg",{className:"h-5 w-5 text-gray-400 dark:text-gray-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})})]})]})})};var n=r(18),d=r(729);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{threshold:r=100,initialPage:s=1,enabled:l=!0}=t,[o,i]=(0,a.useState)(!1),[n,d]=(0,a.useState)(s),[c,h]=(0,a.useState)(!0),g=(0,a.useCallback)((()=>{if(!l||o||!c)return;const e=window.scrollY||document.documentElement.scrollTop,t=document.documentElement.scrollHeight;e+document.documentElement.clientHeight>=t-r&&i(!0)}),[o,c,r,l]);(0,a.useEffect)((()=>(window.addEventListener("scroll",g),()=>window.removeEventListener("scroll",g))),[g]),(0,a.useEffect)((()=>{if(!o)return;(async()=>{try{const t=n+1;!1===await e(t)?h(!1):d(t)}catch(t){console.error("Error fetching more data:",t)}finally{i(!1)}})()}),[o,e,n]);const m=(0,a.useCallback)((()=>{d(s),h(!0),i(!1)}),[s]);return{isFetching:o,hasMore:c,reset:m}},h=()=>{const{currentUser:e,isAuthenticated:t}=(0,d.A)(),[r,h]=(0,a.useState)([]),[g,m]=(0,a.useState)([]),[u,x]=(0,a.useState)([]),[p,y]=(0,a.useState)(null),[b,f]=(0,a.useState)(""),[v,w]=(0,a.useState)(!0),[j,k]=(0,a.useState)(1),[N,C]=(0,a.useState)(!0),E=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{w(!0);const t=(await s.A.get("/api/photos")).data;if(1===e){const e=[...new Set(t.map((e=>e.category)))];x(e)}const r=0,a=12*e,l=t.slice(r,a),o=l.length<t.length;return h(l),C(o),w(!1),o}catch(t){return console.error("Error fetching photos:",t),w(!1),!1}}),[]),L=(0,a.useCallback)((async e=>!!N&&await E(e)),[E,N]),{isFetching:S}=c(L,{threshold:300,initialPage:1,enabled:!v&&N&&!p&&!b});(0,a.useEffect)((()=>{E()}),[E]),(0,a.useEffect)((()=>{let e=[...r];if(p&&(e=e.filter((e=>e.category===p))),b){const t=b.toLowerCase();e=e.filter((e=>e.title.toLowerCase().includes(t)||e.description.toLowerCase().includes(t)||e.category.toLowerCase().includes(t)))}m(e)}),[r,p,b]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"mb-8",children:[(0,o.jsx)("h1",{className:"text-4xl galleria-title mb-2",children:"Galleria"}),(0,o.jsx)("p",{className:"text-dark-text-secondary",children:"Browse and discover amazing photos from our community"})]}),(0,o.jsx)(i,{categories:u,selectedCategory:p,onCategoryChange:e=>{y(e)},onSearch:e=>{f(e)}}),v?(0,o.jsx)(n.ym,{count:12}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-4 text-dark-text-secondary",children:["Showing ",g.length," ",1===g.length?"photo":"photos",p&&(0,o.jsxs)("span",{children:[" in ",(0,o.jsx)("span",{className:"text-primary-400 font-semibold",children:p})]}),b&&(0,o.jsxs)("span",{children:[' matching "',(0,o.jsx)("span",{className:"text-primary-400 font-semibold",children:b}),'"']})]}),(0,o.jsx)(l.A,{photos:g,onLike:async e=>{if(!t)return void alert("Please log in to like photos");const a=r.find((t=>t.id===e));if(!a||!a.liked)try{const t=await s.A.post(`/api/photos/${e}/like`);h(r.map((r=>r.id===e?{...r,likes:t.data.likes,liked:!0}:r))),m(g.map((r=>r.id===e?{...r,likes:t.data.likes,liked:!0}:r)))}catch(l){console.error("Error liking photo:",l)}},onDelete:async e=>{try{await s.A.delete(`/api/photos/${e}`),h(r.filter((t=>t.id!==e))),m(g.filter((t=>t.id!==e)))}catch(t){console.error("Error deleting photo:",t)}},currentUserId:null===e||void 0===e?void 0:e.id})]})]})}},18:(e,t,r)=>{r.d(t,{ym:()=>l});r(43);var a=r(579);const s=()=>(0,a.jsxs)("div",{className:"card group bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden transition-colors duration-200 animate-pulse",children:[(0,a.jsx)("div",{className:"relative overflow-hidden h-64 bg-gray-200 dark:bg-gray-700"}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"w-3/4",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded mb-2"}),(0,a.jsx)("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-700 rounded mb-1"})]}),(0,a.jsx)("div",{className:"h-6 w-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]})})]}),l=e=>{let{count:t=8}=e;return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:Array(t).fill(0).map(((e,t)=>(0,a.jsx)(s,{},t)))})}},134:(e,t,r)=>{r.d(t,{A:()=>c});var a=r(43),s=r(475),l=r(248),o=r(266),i=r(431),n=r(579);const d=e=>{let{photo:t,onLike:r,onDelete:d,currentUserId:c}=e;const{id:h,title:g,path:m,likes:u,category:x,attribution:p,userId:y}=t,[b,f]=(0,a.useState)("square"),[v,w]=(0,a.useState)(!1),[j,k]=(0,a.useState)(!1),N=c&&y===c;return(0,n.jsxs)("div",{className:"card group bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden transition-colors duration-200",children:[(0,n.jsxs)("div",{className:"relative overflow-hidden h-64",children:[(0,n.jsxs)(s.N_,{to:`/photos/${h}`,className:"block w-full h-full cursor-pointer z-10 relative",children:[j?(0,n.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-700",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,n.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:"Image not available"})]}):(0,n.jsx)("img",{src:m,alt:g,className:`\n                transition-transform duration-300 group-hover:scale-105\n                ${"portrait"===b?"w-full h-auto object-cover object-center":""}\n                ${"landscape"===b?"h-full w-auto object-cover object-center":""}\n                ${"square"===b?"w-full h-full object-contain":""}\n                ${v?"opacity-100":"opacity-0"}\n              `,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},onLoad:e=>{const t=(e=>{if(e.naturalWidth&&e.naturalHeight){const t=e.naturalWidth/e.naturalHeight;return t<.9?"portrait":t>1.1?"landscape":"square"}return"square"})(e.target);f(t),w(!0),k(!1)},onError:()=>{k(!0),w(!0)}}),!v&&!j&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white dark:bg-gray-800",children:(0,n.jsx)("div",{className:"w-8 h-8 border-t-4 border-primary-600 border-solid rounded-full animate-spin"})})]}),(0,n.jsx)(s.N_,{to:`/photos/${h}`,className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100 z-20",children:(0,n.jsx)("span",{className:"btn btn-primary px-4 py-2 rounded-md bg-primary-600 text-white",children:"View Details"})}),N&&d&&(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm("Are you sure you want to delete this photo? This action cannot be undone.")&&d(h)},className:"absolute top-2 right-2 p-2 bg-red-600 bg-opacity-70 hover:bg-opacity-100 text-white rounded-full transition-opacity duration-200 opacity-0 group-hover:opacity-100 z-30",title:"Delete photo",children:(0,n.jsx)(l.A,{className:"h-5 w-5"})})]}),(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-1",children:(0,n.jsx)(s.N_,{to:`/photos/${h}`,className:"hover:text-primary-600 dark:hover:text-primary-400",children:g})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 dark:text-gray-300 mr-2 mb-1",children:["#",x]}),p&&(0,n.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:p})]})]}),(0,n.jsxs)("button",{onClick:()=>r(h),className:"flex items-center text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400",children:[t.liked?(0,n.jsx)(i.A,{className:"h-6 w-6 text-red-500 dark:text-red-400"}):(0,n.jsx)(o.A,{className:"h-6 w-6"}),(0,n.jsx)("span",{className:"ml-1",children:u})]})]})})]})},c=e=>{let{photos:t,onLike:r,onDelete:a,currentUserId:s}=e;return t&&0!==t.length?(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map((e=>(0,n.jsx)(d,{photo:e,onLike:r,onDelete:a,currentUserId:s},e.id)))}):(0,n.jsx)("div",{className:"text-center py-10",children:(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-500",children:"No photos found"})})}},248:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(43);function s(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const l=a.forwardRef(s)},266:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(43);function s(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const l=a.forwardRef(s)},431:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(43);function s(e,t){let{title:r,titleId:s,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),r?a.createElement("title",{id:s},r):null,a.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const l=a.forwardRef(s)}}]);
//# sourceMappingURL=6.7101f120.chunk.js.map