"use strict";(self.webpackChunkphoto_gallery_client=self.webpackChunkphoto_gallery_client||[]).push([[199],{199:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(43),r=t(862),d=t(729),l=t(768);function n(e,a){let{title:t,titleId:r,...d}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},d),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const i=s.forwardRef(n);var o=t(811),c=t(248),m=t(579);const x=()=>{const{currentUser:e}=(0,d.A)(),[a,t]=(0,s.useState)([]),[n,x]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(!1),[f,w]=(0,s.useState)(!1),[j,v]=(0,s.useState)(null),[k,N]=(0,s.useState)({username:"",email:"",password:"",isAdmin:!1});(0,s.useEffect)((()=>{(async()=>{try{x(!0);const e=await r.A.get("/api/users");t(e.data),h(null)}catch(n){var e,a,s,d;h((null===(e=n.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to fetch users"),l.oR.error((null===(s=n.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.message)||"Failed to fetch users")}finally{x(!1)}})()}),[]);const A=e=>{const{name:a,value:t,type:s,checked:r}=e.target;N({...k,[a]:"checkbox"===s?r:t})},C=()=>{g(!1),b(!1),w(!1),v(null)};return null!==e&&void 0!==e&&e.isAdmin?(0,m.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold",children:"User Management"}),(0,m.jsxs)("button",{onClick:()=>{N({username:"",email:"",password:"",isAdmin:!1}),g(!0)},className:"bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md flex items-center",children:[(0,m.jsx)(i,{className:"h-5 w-5 mr-2"}),"Add User"]})]}),n?(0,m.jsx)("div",{className:"flex justify-center my-8",children:(0,m.jsx)("div",{className:"w-12 h-12 border-t-4 border-primary-600 border-solid rounded-full animate-spin"})}):u?(0,m.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",children:u}):(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 shadow-md rounded-lg overflow-hidden",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,m.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Username"}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),(0,m.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),(0,m.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map((a=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.username})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:a.email})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(a.isAdmin?"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"),children:a.isAdmin?"Admin":"User"})}),(0,m.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:new Date(a.createdAt).toLocaleDateString()})}),(0,m.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,m.jsx)("button",{onClick:()=>(e=>{v(e),N({username:e.username,email:e.email,password:"",isAdmin:e.isAdmin||!1}),b(!0)})(a),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-3",children:(0,m.jsx)(o.A,{className:"h-5 w-5"})}),a.id!==e.id&&(0,m.jsx)("button",{onClick:()=>(e=>{v(e),w(!0)})(a),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:(0,m.jsx)(c.A,{className:"h-5 w-5"})})]})]},a.id)))})]})}),p&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md w-full",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Add New User"}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await r.A.post("/api/users",k);t([...a,e.data]),l.oR.success("User added successfully"),C()}catch(n){var s,d;l.oR.error((null===(s=n.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.message)||"Failed to add user")}},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Username"}),(0,m.jsx)("input",{type:"text",name:"username",value:k.username,onChange:A,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-white dark:bg-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Email"}),(0,m.jsx)("input",{type:"email",name:"email",value:k.email,onChange:A,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-white dark:bg-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Password"}),(0,m.jsx)("input",{type:"password",name:"password",value:k.password,onChange:A,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-white dark:bg-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",name:"isAdmin",checked:k.isAdmin,onChange:A,className:"form-checkbox h-5 w-5 text-primary-600"}),(0,m.jsx)("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Admin privileges"})]})}),(0,m.jsxs)("div",{className:"flex justify-end",children:[(0,m.jsx)("button",{type:"button",onClick:C,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded",children:"Add User"})]})]})]})}),y&&j&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md w-full",children:[(0,m.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Edit User: ",j.username]}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={...k};e.password||delete e.password;const s=await r.A.put(`/api/users/${j.id}`,e);t(a.map((e=>e.id===j.id?s.data:e))),l.oR.success("User updated successfully"),C()}catch(n){var s,d;l.oR.error((null===(s=n.response)||void 0===s||null===(d=s.data)||void 0===d?void 0:d.message)||"Failed to update user")}},children:[(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Username"}),(0,m.jsx)("input",{type:"text",name:"username",value:k.username,onChange:A,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-white dark:bg-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Email"}),(0,m.jsx)("input",{type:"email",name:"email",value:k.email,onChange:A,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-white dark:bg-gray-700 leading-tight focus:outline-none focus:shadow-outline",required:!0})]}),(0,m.jsxs)("div",{className:"mb-4",children:[(0,m.jsx)("label",{className:"block text-gray-700 dark:text-gray-300 text-sm font-bold mb-2",children:"Password (leave blank to keep current)"}),(0,m.jsx)("input",{type:"password",name:"password",value:k.password,onChange:A,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 dark:text-white dark:bg-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),(0,m.jsx)("div",{className:"mb-6",children:(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",name:"isAdmin",checked:k.isAdmin,onChange:A,className:"form-checkbox h-5 w-5 text-primary-600"}),(0,m.jsx)("span",{className:"ml-2 text-gray-700 dark:text-gray-300",children:"Admin privileges"})]})}),(0,m.jsxs)("div",{className:"flex justify-end",children:[(0,m.jsx)("button",{type:"button",onClick:C,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",className:"bg-primary-600 hover:bg-primary-700 text-white font-bold py-2 px-4 rounded",children:"Update User"})]})]})]})}),f&&j&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,m.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-8 max-w-md w-full",children:[(0,m.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Delete User"}),(0,m.jsxs)("p",{className:"mb-6 text-gray-700 dark:text-gray-300",children:["Are you sure you want to delete the user ",(0,m.jsx)("span",{className:"font-bold",children:j.username}),"? This action cannot be undone."]}),(0,m.jsxs)("div",{className:"flex justify-end",children:[(0,m.jsx)("button",{onClick:C,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),(0,m.jsx)("button",{onClick:async()=>{try{await r.A.delete(`/api/users/${j.id}`),t(a.filter((e=>e.id!==j.id))),l.oR.success("User deleted successfully"),C()}catch(d){var e,s;l.oR.error((null===(e=d.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to delete user")}},className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",children:"Delete"})]})]})})]}):(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh]",children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Access Denied"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"You do not have permission to access this page."})]})}},248:(e,a,t)=>{t.d(a,{A:()=>d});var s=t(43);function r(e,a){let{title:t,titleId:r,...d}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},d),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const d=s.forwardRef(r)},811:(e,a,t)=>{t.d(a,{A:()=>d});var s=t(43);function r(e,a){let{title:t,titleId:r,...d}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},d),t?s.createElement("title",{id:r},t):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const d=s.forwardRef(r)}}]);
//# sourceMappingURL=199.69566072.chunk.js.map