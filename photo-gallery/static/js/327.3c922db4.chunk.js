"use strict";(self.webpackChunkphoto_gallery_client=self.webpackChunkphoto_gallery_client||[]).push([[327],{248:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(43);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const l=r.forwardRef(s)},266:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(43);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const l=r.forwardRef(s)},327:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var r=a(43),s=a(216),l=a(475),i=a(213);function n(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const o=r.forwardRef(n);function c(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const d=r.forwardRef(c);var m=a(266),h=a(811),x=a(248),u=a(431),p=a(729),b=a(579);const g=e=>{let{src:t,placeholderSrc:a,alt:s,onLoad:l,style:i={},className:n="",...o}=e;const[c,d]=(0,r.useState)(!0);(0,r.useEffect)((()=>{d(!0)}),[t]);return(0,b.jsxs)("div",{className:`relative overflow-hidden ${n}`,style:i,children:[c&&a&&(0,b.jsx)("img",{src:a,alt:s,className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500 filter blur-sm scale-105",style:{opacity:c?.6:0}}),(0,b.jsx)("img",{src:t,alt:s,className:`\n          transition-opacity duration-500 ease-in-out w-full h-full\n          ${c?"opacity-0":"opacity-100"}\n        `,style:{objectFit:"cover",...i},onLoad:e=>{d(!1),l&&l(e)},onError:()=>d(!1),...o}),c&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("div",{className:"w-8 h-8 border-t-2 border-primary-600 border-solid rounded-full animate-spin"})})]})};var y=a(308);const f=e=>{let{src:t,alt:a,className:s="",style:l={},onLoad:i,...n}=e;const[o,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),h=(0,r.useRef)(null),x=e=>{e.stopPropagation(),c(!o)};return(0,b.jsx)("div",{className:"relative overflow-hidden "+(o?"cursor-zoom-out":"cursor-zoom-in"),ref:h,onClick:x,style:{...l},children:o?(0,b.jsx)(y.P.div,{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:e=>{d||x(e)},children:(0,b.jsxs)(y.P.div,{className:"relative",drag:!0,dragConstraints:h,dragElastic:.1,onDragStart:()=>{m(!0)},onDragEnd:()=>{setTimeout((()=>{m(!1)}),100)},children:[(0,b.jsx)(y.P.img,{src:t,alt:a,className:"max-w-[90vw] max-h-[90vh] object-contain",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3},onLoad:i,onClick:e=>{d&&e.stopPropagation()},...n}),(0,b.jsx)("div",{className:"absolute top-4 right-4 text-white text-sm bg-black bg-opacity-50 px-3 py-1 rounded-full",children:"Click and drag to move \u2022 Scroll to zoom \u2022 Click to close"})]})}):(0,b.jsx)("img",{src:t,alt:a,className:`transition-transform duration-200 hover:scale-[1.03] ${s}`,onLoad:i,onClick:x,...n})})},j=()=>{const{id:e}=(0,s.g)(),t=(0,s.Zp)(),{currentUser:a,isAuthenticated:n}=(0,p.A)(),[c,y]=(0,r.useState)(null),[j,v]=(0,r.useState)(!0),[w,k]=(0,r.useState)(null),[N,C]=(0,r.useState)(!1),[E,L]=(0,r.useState)(!1),[A,S]=(0,r.useState)("square"),[$,D]=(0,r.useState)(!1),[I,z]=(0,r.useState)({title:"",description:"",category:"",attribution:""});(0,r.useEffect)((()=>{(async()=>{try{const t=await i.A.get(`/api/photos/${e}`);y(t.data),z({title:t.data.title,description:t.data.description,category:t.data.category,attribution:t.data.attribution||""}),L(!!t.data.attribution),v(!1)}catch(w){console.error("Error fetching photo:",w),k("Photo not found or error loading photo"),v(!1)}})()}),[e]);const B=e=>{const t=(e=>{if(e.naturalWidth&&e.naturalHeight){const t=e.naturalWidth/e.naturalHeight;return t<.9?"portrait":t>1.1?"landscape":"square"}return"square"})(e.target);S(t),D(!0)},F=e=>{z({...I,[e.target.name]:e.target.value})};if(j)return(0,b.jsx)("div",{className:"flex justify-center py-12",children:(0,b.jsx)("div",{className:"w-12 h-12 border-t-4 border-primary-600 border-solid rounded-full animate-spin"})});if(w)return(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:w}),(0,b.jsx)(l.N_,{to:"/gallery",className:"btn btn-primary",children:"Back to Gallery"})]});const P=n&&a&&c.userId===a.id;return(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)(l.N_,{to:"/gallery",className:"inline-flex items-center text-primary-600 hover:text-primary-700",children:[(0,b.jsx)(o,{className:"h-5 w-5 mr-1"}),"Back to Gallery"]})}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:(0,b.jsxs)("div",{className:"md:flex",children:[(0,b.jsxs)("div",{className:"md:w-2/3 relative h-[500px]",children:[(0,b.jsxs)("div",{className:"absolute top-2 right-2 z-10 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm flex items-center",children:[(0,b.jsx)(d,{className:"h-4 w-4 mr-1"}),"Click image to zoom"]}),(0,b.jsxs)("div",{className:"absolute inset-0",children:[!$&&(0,b.jsx)(g,{src:c.path,placeholderSrc:`${c.path}?width=50`,alt:c.title,style:{position:"absolute",left:"0",top:"0",width:"100%",height:"100%",objectFit:"contain",zIndex:5},onLoad:B}),(0,b.jsx)(f,{src:c.path,alt:c.title,className:`\n                  ${"portrait"===A?"h-auto w-full max-h-[500px] object-contain":""}\n                  ${"landscape"===A?"w-auto h-full max-w-full object-contain":""}\n                  ${"square"===A?"max-h-[500px] max-w-full object-contain":""}\n                `,style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",zIndex:10,width:"100%",height:"100%"},onLoad:B})]})]}),(0,b.jsx)("div",{className:"md:w-1/3 p-6 dark:text-white",children:N?(0,b.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await i.A.put(`/api/photos/${e}`,I);y(t.data),C(!1)}catch(w){console.error("Error updating photo:",w)}},children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-bold mb-2",htmlFor:"title",children:"Title"}),(0,b.jsx)("input",{type:"text",id:"title",name:"title",value:I.title,onChange:F,className:"input",required:!0})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-bold mb-2",htmlFor:"category",children:"Category"}),(0,b.jsx)("input",{type:"text",id:"category",name:"category",value:I.category,onChange:F,className:"input"})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-bold mb-2",htmlFor:"description",children:"Description"}),(0,b.jsx)("textarea",{id:"description",name:"description",value:I.description,onChange:F,className:"input h-32",placeholder:"Enter a description for your photo..."})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",id:"showAttribution",checked:E,onChange:()=>L(!E),className:"mr-2"}),(0,b.jsx)("label",{className:"text-gray-700 dark:text-gray-200 text-sm font-bold",htmlFor:"showAttribution",children:"Attribution"})]})}),E&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-gray-700 dark:text-gray-200 text-sm font-bold mb-2",htmlFor:"attribution",children:"Attribution"}),(0,b.jsx)("textarea",{id:"attribution",name:"attribution",value:I.attribution,onChange:F,className:"input h-20",placeholder:"Credit the original creator or source of this image..."})]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"}),(0,b.jsx)("button",{type:"button",onClick:()=>C(!1),className:"btn btn-secondary",children:"Cancel"})]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:c.title}),(0,b.jsxs)("button",{onClick:async()=>{if(n){if(!c.liked)try{const t=await i.A.post(`/api/photos/${e}/like`);y({...c,likes:t.data.likes,liked:!0})}catch(w){console.error("Error liking photo:",w)}}else alert("Please log in to like photos")},className:"flex items-center text-gray-500 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400",children:[c.liked?(0,b.jsx)(u.A,{className:"h-6 w-6 text-red-500"}):(0,b.jsx)(m.A,{className:"h-6 w-6"}),(0,b.jsx)("span",{className:"ml-1",children:c.likes})]})]}),(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{className:"inline-block bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold text-gray-700 dark:text-gray-200",children:["#",c.category]}),c.attribution&&(0,b.jsx)("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:c.attribution})]})}),c.description&&(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Description"}),(0,b.jsx)("div",{className:"text-gray-600 dark:text-gray-300 whitespace-pre-line",children:c.description})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Details"}),(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:(0,b.jsxs)("p",{children:["Uploaded on ",new Date(c.uploadDate).toLocaleDateString()]})})]}),P&&(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsxs)("button",{onClick:()=>C(!0),className:"btn btn-secondary flex items-center",children:[(0,b.jsx)(h.A,{className:"h-5 w-5 mr-1"}),"Edit"]}),(0,b.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this photo? This action cannot be undone."))try{await i.A.delete(`/api/photos/${e}`),t("/gallery")}catch(w){console.error("Error deleting photo:",w)}},className:"btn btn-danger flex items-center",children:[(0,b.jsx)(x.A,{className:"h-5 w-5 mr-1"}),"Delete"]})]})]})})]})})]})}},431:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(43);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const l=r.forwardRef(s)},811:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(43);function s(e,t){let{title:a,titleId:s,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},l),a?r.createElement("title",{id:s},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const l=r.forwardRef(s)}}]);
//# sourceMappingURL=327.3c922db4.chunk.js.map